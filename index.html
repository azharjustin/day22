<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
  
    <title>CountriesFlag</title>
</head>
<body>
    <div class="search-wrapper">
        <label for="search">Search Countries</label>
        <input type="search" id="search">
      </div>
    <div id="bg" style="display: flex; flex-direction: row; flex-wrap: wrap; justify-content: center;    justify-content: space-evenly;
    align-content: space-around; "></div>
    <script>
const searchInput = document.getElementById("search");
var countries=[];

searchInput.addEventListener('keyup', e => {
  const value = e.target.value.toLowerCase();
  console.log(value);
  const filteredCountries=countries.filter((user) => {
     return(
        user.name.common.toLowerCase().includes(value)||
        user.cca2.toLowerCase().includes(value)
     );
     
     
  });
 displaylist(filteredCountries);
})


        async function fetchData(){
            try{ 
            var countryData = await fetch("https://restcountries.com/v3.1/all")
            countries = await countryData.json()
            console.log(countries);
          countries.map(user => {
                var card =document.createElement("div");
                 card.style.width="32%";
                 card.style.height="170px";
                
                 card.style.border="solid black"
                 card.style.marginTop="5px";
                 card.style.borderRadius="12px"
                 card.style.backgroundColor="linen";
                 var box=document.createElement("div")
                var box2=document.createElement("div")
                box.style.textAlign="center";
                box2.style.textAlign="center";          
                // box.style.backgroundColor="gray";
                // box2.style.backgroundColor="gray";
                var flagBox=document.createElement("div")
                var flag=document.createElement("img");
                flag.style.height="120px";
                // flag.style.width="100%";
                flag.style.borderRadius="5px";
                flag.style.objectFit="cover";
                flagBox.style.marginTop="5px";
                flagBox.style.display="flex";
                flagBox.style.justifyContent="center";
                // flag.style.marginLeft="50px";
                flag.setAttribute("src",user.flags.png)
                flag.setAttribute("width",200)
                
                
                box.innerText="Name  :"+(user.name.common);
                box2.innerText="code  :"+user.cca2;
                
                // box.style.height="30px";
                flagBox.appendChild(flag)
                card.appendChild(flagBox)
                card.appendChild(box)
                card.appendChild(box2)

                document.getElementById("bg").appendChild(card)
                return{name:user.name.commom}
            });
        }
        catch(error){
            console.log(error)
        }
        var displaylist = (ele) => {
    const htmlString = ele
        .map((ele) => {
            return `
            <li class="character">
                <h2>${ele.name.commom}</h2>
                <p>${ele.cca2}</p>
                <img src="${ele.flags.png}"></img>
            </li>
        `;
        })
        .join('');
    search.innerHTML = htmlString;
};

  }
  fetchData() 
    </script>
</body>
</html>